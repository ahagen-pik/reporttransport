---
title: "Untitled"
author: "Johanna Hoppe"
date: "2024-09-05"
output: html_document
---

```{r setup, echo=FALSE}
knitr::opts_chunk$set(echo = TRUE)

```


```{r preprocessing, echo=FALSE, message=FALSE, results='hide'}
library(ggplot2)
library(data.table)
timeResReporting <-  c(seq(2005, 2060, by = 5), seq(2070, 2100, by = 10))
axisScaling = "free_y" #fixed

pathNew <- "C:/Users/johannah/Documents/EDGE-Transport/AMT/PR271/2024-09-05_09.08.21-SSP2-Mix1-SSP2/5_REMINDinputData"
pathOld <- "C:/Users/johannah/Documents/EDGE-Transport/AMT/PR271/2024-09-05_09.14.16-SSP2-Mix1-SSP2/5_REMINDinputData"
newScenarioName <- "Mix1 inkl active modes"

files <- list(f29_trpdemand = "f29_trpdemand",
              f35_demByTech = "f35_demByTech",
              f35_esCapCost = "f35_esCapCost", 
              f35_fe2es = "f35_fe2es")

new <- lapply(files, function(x)fread(file.path(pathNew, paste0(x, ".csv"))))
new <- lapply(new, function(x){x[, EDGE_scenario := newScenarioName][, V1 := NULL]})

old <- lapply(files, function(x)fread(file.path(pathOld, paste0(x, ".csv"))))
old <- lapply(old, function(x){x[, V1 := NULL]})

f29_trpdemand <- rbind(new$f29_trpdemand, old$f29_trpdemand)
f29_trpdemand <- f29_trpdemand[tall %in% timeResReporting]
f35_fe2es <- rbind(new$f35_fe2es, old$f35_fe2es)
f35_fe2es <- f35_fe2es[tall %in% timeResReporting]
f35_esCapCost <- rbind(new$f35_esCapCost, old$f35_esCapCost)
f35_esCapCost <- f35_esCapCost[tall %in% timeResReporting]
f35_demByTech <- rbind(new$f35_demByTech, old$f35_demByTech)
f35_demByTech <- f35_demByTech[tall %in% timeResReporting]
```

# REMIND input data rom EDGE-T standalone comparison

## Energy service demand on CES node level
```{r trp_demand, echo=FALSE}
unique_all_in <- unique(f29_trpdemand$all_in)

# Loop through each unique value of all_teEs and create a plot
for (allin in unique_all_in) {
  
  # Filter data for the current technology/service (all_teEs)
  filtered_data <- f29_trpdemand[all_in == allin]
  
  # Create the ggplot for the current teEs
  p <- ggplot(filtered_data, aes(x = tall, y = value, color = EDGE_scenario)) +
    geom_line() +
    facet_wrap(~ all_regi, scales = axisScaling) +  # Facet by region/country
    labs(
      title = paste("Energy service demand for:", allin),
      x = "Time",
      y = "Value",
      color = "EDGE Scenario"
    ) +
    theme_minimal() +
    theme(legend.position = "bottom")
  
  # Print the plot (or save it if you want to store the plots)
  print(p)
  
  # Optionally, save the plot to a file
  # ggsave(paste0("plot_", teEs, ".png"), plot = p, width = 8, height = 6)
}

```


## Energy efficiency per energy service technology
```{r fe2es, echo=FALSE}
unique_teEs <- unique(f35_fe2es$all_teEs)

# Loop through each unique value of all_teEs and create a plot
for (teEs in unique_teEs) {
  
  # Filter data for the current technology/service (all_teEs)
  filtered_data <- f35_fe2es[all_teEs == teEs, ]
  
  # Create the ggplot for the current teEs
  p <- ggplot(filtered_data, aes(x = tall, y = value, color = EDGE_scenario)) +
    geom_line() +
    facet_wrap(~ all_regi, scales = axisScaling) +  # Facet by region/country
    labs(
      title = paste("Energy efficiency for:", teEs),
      x = "Time",
      y = "Value",
      color = "EDGE Scenario"
    ) +
    theme_minimal() +
    theme(legend.position = "bottom")
  
  # Print the plot (or save it if you want to store the plots)
  print(p)
  
  # Optionally, save the plot to a file
  # ggsave(paste0("plot_", teEs, ".png"), plot = p, width = 8, height = 6)
}

```


## Capital cost per energy service technology
```{r capital cost, echo=FALSE}
unique_teEs <- unique(f35_esCapCost$all_teEs)

# Loop through each unique value of all_teEs and create a plot
for (teEs in unique_teEs) {
  
  # Filter data for the current technology/service (all_teEs)
  filtered_data <- f35_esCapCost[all_teEs == teEs, ]
  
  # Create the ggplot for the current teEs
  p <- ggplot(filtered_data, aes(x = tall, y = value, color = EDGE_scenario)) +
    geom_line() +
    facet_wrap(~ all_regi, scales = axisScaling) +  # Facet by region/country
    labs(
      title = paste("Capital cost for:", teEs),
      x = "Time",
      y = "Value",
      color = "EDGE Scenario"
    ) +
    theme_minimal() +
    theme(legend.position = "bottom")
  
  # Print the plot (or save it if you want to store the plots)
  print(p)
  
  # Optionally, save the plot to a file
  # ggsave(paste0("plot_", teEs, ".png"), plot = p, width = 8, height = 6)
}

```

## Final energy demand per energy service technology
```{r demByTech, echo=FALSE}
unique_teEs <- unique(f35_demByTech$all_teEs)

# Loop through each unique value of all_teEs and create a plot
for (teEs in unique_teEs) {
  
  # Filter data for the current technology/service (all_teEs)
  filtered_data <- f35_demByTech[all_teEs == teEs]
  
  # Create the ggplot for the current teEs
  p <- ggplot(filtered_data, aes(x = tall, y = value, color = EDGE_scenario)) +
    geom_line() +
    facet_wrap(~ all_regi, scales = axisScaling) +  # Facet by region/country
    labs(
      title = paste("Capital cost for:", teEs),
      x = "Time",
      y = "Value",
      color = "EDGE Scenario"
    ) +
    theme_minimal() +
    theme(legend.position = "bottom")
  
  # Print the plot (or save it if you want to store the plots)
  print(p)
  
  # Optionally, save the plot to a file
  # ggsave(paste0("plot_", teEs, ".png"), plot = p, width = 8, height = 6)
}

```
